diff --git a/.gemini-output.json b/.gemini-output.json
new file mode 100644
index 0000000..0716e4d
--- /dev/null
+++ b/.gemini-output.json
@@ -0,0 +1,122 @@
+{
+  "session_id": "8f6e1a6e-54f6-437c-beaa-82a2796239f6",
+  "response": "I have completed the task. I've built the Plugin Marketplace system with all requested modules (Registry, Resolver, Runner, Reviews, and Dependency Graph), integrated them in `src/index.ts` with a functional `installPlugin` workflow, and ensured everything passes linting, compilation, and testing. All constraints, including the use of `better-sqlite3`, `semver`, and `vm`, have been strictly followed.",
+  "stats": {
+    "models": {
+      "gemini-2.5-flash-lite": {
+        "api": {
+          "totalRequests": 5,
+          "totalErrors": 4,
+          "totalLatencyMs": 2544
+        },
+        "tokens": {
+          "input": 1659,
+          "prompt": 1659,
+          "candidates": 117,
+          "total": 2168,
+          "cached": 0,
+          "thoughts": 392,
+          "tool": 0
+        }
+      },
+      "gemini-3-flash-preview": {
+        "api": {
+          "totalRequests": 47,
+          "totalErrors": 13,
+          "totalLatencyMs": 139658
+        },
+        "tokens": {
+          "input": 105821,
+          "prompt": 589447,
+          "candidates": 14422,
+          "total": 608289,
+          "cached": 483626,
+          "thoughts": 4420,
+          "tool": 0
+        }
+      },
+      "gemini-2.5-flash": {
+        "api": {
+          "totalRequests": 1,
+          "totalErrors": 0,
+          "totalLatencyMs": 9018
+        },
+        "tokens": {
+          "input": 497,
+          "prompt": 7171,
+          "candidates": 146,
+          "total": 8725,
+          "cached": 6674,
+          "thoughts": 1408,
+          "tool": 0
+        }
+      }
+    },
+    "tools": {
+      "totalCalls": 34,
+      "totalSuccess": 34,
+      "totalFail": 0,
+      "totalDurationMs": 31886,
+      "totalDecisions": {
+        "accept": 34,
+        "reject": 0,
+        "modify": 0,
+        "auto_accept": 0
+      },
+      "byName": {
+        "read_file": {
+          "count": 2,
+          "success": 2,
+          "fail": 0,
+          "durationMs": 10,
+          "decisions": {
+            "accept": 2,
+            "reject": 0,
+            "modify": 0,
+            "auto_accept": 0
+          }
+        },
+        "write_file": {
+          "count": 8,
+          "success": 8,
+          "fail": 0,
+          "durationMs": 27,
+          "decisions": {
+            "accept": 8,
+            "reject": 0,
+            "modify": 0,
+            "auto_accept": 0
+          }
+        },
+        "run_shell_command": {
+          "count": 15,
+          "success": 15,
+          "fail": 0,
+          "durationMs": 31817,
+          "decisions": {
+            "accept": 15,
+            "reject": 0,
+            "modify": 0,
+            "auto_accept": 0
+          }
+        },
+        "replace": {
+          "count": 9,
+          "success": 9,
+          "fail": 0,
+          "durationMs": 32,
+          "decisions": {
+            "accept": 9,
+            "reject": 0,
+            "modify": 0,
+            "auto_accept": 0
+          }
+        }
+      }
+    },
+    "files": {
+      "totalLinesAdded": 986,
+      "totalLinesRemoved": 31
+    }
+  }
+}
\ No newline at end of file
diff --git a/.thunderdome-metrics.json b/.thunderdome-metrics.json
new file mode 100644
index 0000000..9755aef
--- /dev/null
+++ b/.thunderdome-metrics.json
@@ -0,0 +1,10 @@
+{
+  "input_tokens": 107977,
+  "output_tokens": 14685,
+  "cache_read_tokens": 490300,
+  "cache_creation_tokens": 0,
+  "thought_tokens": 6220,
+  "turns": 34,
+  "total_cost_usd": -0.171638,
+  "note": "google-one-oauth-no-actual-cost"
+}
\ No newline at end of file
diff --git a/.thunderdome-stderr.log b/.thunderdome-stderr.log
new file mode 100644
index 0000000..bd1e118
--- /dev/null
+++ b/.thunderdome-stderr.log
@@ -0,0 +1,21 @@
+YOLO mode is enabled. All tool calls will be automatically approved.
+Loaded cached credentials.
+YOLO mode is enabled. All tool calls will be automatically approved.
+Hook registry initialized with 0 hook entries
+Attempt 1 failed: You have exhausted your capacity on this model. Your quota will reset after 1s.. Retrying after 1345.013804ms...
+Attempt 2 failed: You have exhausted your capacity on this model. Your quota will reset after 2s.. Retrying after 2907.306951ms...
+Attempt 3 failed: You have exhausted your capacity on this model. Your quota will reset after 2s.. Retrying after 2914.6687180000004ms...
+Attempt 4 failed: You have exhausted your capacity on this model. Your quota will reset after 2s.. Retrying after 2917.339793ms...
+Attempt 1 failed: You have exhausted your capacity on this model. Your quota will reset after 0s.. Retrying after 679.197398ms...
+Attempt 1 failed: You have exhausted your capacity on this model. Your quota will reset after 0s.. Retrying after 709.7544489999999ms...
+Attempt 1 failed: You have exhausted your capacity on this model. Your quota will reset after 1s.. Retrying after 1082.882234ms...
+Attempt 1 failed: You have exhausted your capacity on this model. Your quota will reset after 0s.. Retrying after 904.6639560000001ms...
+Attempt 1 failed: You have exhausted your capacity on this model. Your quota will reset after 1s.. Retrying after 1599.505914ms...
+Attempt 1 failed: You have exhausted your capacity on this model. Your quota will reset after 0s.. Retrying after 487.520704ms...
+Attempt 1 failed: You have exhausted your capacity on this model. Your quota will reset after 0s.. Retrying after 665.188942ms...
+Attempt 1 failed: You have exhausted your capacity on this model. Your quota will reset after 0s.. Retrying after 836.477409ms...
+Attempt 1 failed: You have exhausted your capacity on this model. Your quota will reset after 0s.. Retrying after 645.922094ms...
+Attempt 1 failed: You have exhausted your capacity on this model. Your quota will reset after 1s.. Retrying after 1174.14959ms...
+Attempt 1 failed: You have exhausted your capacity on this model. Your quota will reset after 2s.. Retrying after 2295.34689ms...
+Attempt 1 failed: You have exhausted your capacity on this model. Your quota will reset after 0s.. Retrying after 154.22402ms...
+Attempt 1 failed: You have exhausted your capacity on this model. Your quota will reset after 0s.. Retrying after 245.703621ms...
diff --git a/package-lock.json b/package-lock.json
index fb449ee..1a20967 100644
--- a/package-lock.json
+++ b/package-lock.json
@@ -16,11 +16,83 @@
         "@types/semver": "^7.5.0",
         "@typescript-eslint/eslint-plugin": "^7.0.0",
         "@typescript-eslint/parser": "^7.0.0",
+        "@vitest/coverage-v8": "^2.0.0",
         "eslint": "^8.56.0",
         "typescript": "^5.4.0",
         "vitest": "^2.0.0"
       }
     },
+    "node_modules/@ampproject/remapping": {
+      "version": "2.3.0",
+      "resolved": "https://registry.npmjs.org/@ampproject/remapping/-/remapping-2.3.0.tgz",
+      "integrity": "sha512-30iZtAPgz+LTIYoeivqYo853f02jBYSd5uGnGpkFV0M3xOt9aN73erkgYAmZU43x4VfqcnLxW9Kpg3R5LC4YYw==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "dependencies": {
+        "@jridgewell/gen-mapping": "^0.3.5",
+        "@jridgewell/trace-mapping": "^0.3.24"
+      },
+      "engines": {
+        "node": ">=6.0.0"
+      }
+    },
+    "node_modules/@babel/helper-string-parser": {
+      "version": "7.27.1",
+      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
+      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/helper-validator-identifier": {
+      "version": "7.28.5",
+      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.28.5.tgz",
+      "integrity": "sha512-qSs4ifwzKJSV39ucNjsvc6WVHs6b7S03sOh2OcHF9UHfVPqWWALUsNUVzhSBiItjRZoLHx7nIarVjqKVusUZ1Q==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/parser": {
+      "version": "7.29.0",
+      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.29.0.tgz",
+      "integrity": "sha512-IyDgFV5GeDUVX4YdF/3CPULtVGSXXMLh1xVIgdCgxApktqnQV0r7/8Nqthg+8YLGaAtdyIlo2qIdZrbCv4+7ww==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/types": "^7.29.0"
+      },
+      "bin": {
+        "parser": "bin/babel-parser.js"
+      },
+      "engines": {
+        "node": ">=6.0.0"
+      }
+    },
+    "node_modules/@babel/types": {
+      "version": "7.29.0",
+      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.29.0.tgz",
+      "integrity": "sha512-LwdZHpScM4Qz8Xw2iKSzS+cfglZzJGvofQICy7W7v4caru4EaAmyUuO6BGrbyQ2mYV11W0U8j5mBhd14dd3B0A==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/helper-string-parser": "^7.27.1",
+        "@babel/helper-validator-identifier": "^7.28.5"
+      },
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@bcoe/v8-coverage": {
+      "version": "0.2.3",
+      "resolved": "https://registry.npmjs.org/@bcoe/v8-coverage/-/v8-coverage-0.2.3.tgz",
+      "integrity": "sha512-0hYQ8SB4Db5zvZB4axdMHGwEaQjkZzFjQiN9LVYvIFB2nSUHW9tYpxWriPrWDASIxiaXax83REcLxuSdnGPZtw==",
+      "dev": true,
+      "license": "MIT"
+    },
     "node_modules/@esbuild/aix-ppc64": {
       "version": "0.21.5",
       "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.21.5.tgz",
@@ -561,6 +633,84 @@
       "dev": true,
       "license": "BSD-3-Clause"
     },
+    "node_modules/@isaacs/cliui": {
+      "version": "8.0.2",
+      "resolved": "https://registry.npmjs.org/@isaacs/cliui/-/cliui-8.0.2.tgz",
+      "integrity": "sha512-O8jcjabXaleOG9DQ0+ARXWZBTfnP4WNAqzuiJK7ll44AmxGKv/J2M4TPjxjY3znBCfvBXFzucm1twdyFybFqEA==",
+      "dev": true,
+      "license": "ISC",
+      "dependencies": {
+        "string-width": "^5.1.2",
+        "string-width-cjs": "npm:string-width@^4.2.0",
+        "strip-ansi": "^7.0.1",
+        "strip-ansi-cjs": "npm:strip-ansi@^6.0.1",
+        "wrap-ansi": "^8.1.0",
+        "wrap-ansi-cjs": "npm:wrap-ansi@^7.0.0"
+      },
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/@isaacs/cliui/node_modules/ansi-regex": {
+      "version": "6.2.2",
+      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-6.2.2.tgz",
+      "integrity": "sha512-Bq3SmSpyFHaWjPk8If9yc6svM8c56dB5BAtW4Qbw5jHTwwXXcTLoRMkpDJp6VL0XzlWaCHTXrkFURMYmD0sLqg==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/ansi-regex?sponsor=1"
+      }
+    },
+    "node_modules/@isaacs/cliui/node_modules/strip-ansi": {
+      "version": "7.1.2",
+      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-7.1.2.tgz",
+      "integrity": "sha512-gmBGslpoQJtgnMAvOVqGZpEz9dyoKTCzy2nfz/n8aIFhN/jCE/rCmcxabB6jOOHV+0WNnylOxaxBQPSvcWklhA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "ansi-regex": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/strip-ansi?sponsor=1"
+      }
+    },
+    "node_modules/@istanbuljs/schema": {
+      "version": "0.1.3",
+      "resolved": "https://registry.npmjs.org/@istanbuljs/schema/-/schema-0.1.3.tgz",
+      "integrity": "sha512-ZXRY4jNvVgSVQ8DL3LTcakaAtXwTVUxE81hslsyD2AtoXW/wVob10HkOJ1X/pAlcI7D+2YoZKg5do8G/w6RYgA==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/@jridgewell/gen-mapping": {
+      "version": "0.3.13",
+      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
+      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@jridgewell/sourcemap-codec": "^1.5.0",
+        "@jridgewell/trace-mapping": "^0.3.24"
+      }
+    },
+    "node_modules/@jridgewell/resolve-uri": {
+      "version": "3.1.2",
+      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
+      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6.0.0"
+      }
+    },
     "node_modules/@jridgewell/sourcemap-codec": {
       "version": "1.5.5",
       "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
@@ -568,6 +718,17 @@
       "dev": true,
       "license": "MIT"
     },
+    "node_modules/@jridgewell/trace-mapping": {
+      "version": "0.3.31",
+      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
+      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@jridgewell/resolve-uri": "^3.1.0",
+        "@jridgewell/sourcemap-codec": "^1.4.14"
+      }
+    },
     "node_modules/@nodelib/fs.scandir": {
       "version": "2.1.5",
       "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
@@ -606,6 +767,17 @@
         "node": ">= 8"
       }
     },
+    "node_modules/@pkgjs/parseargs": {
+      "version": "0.11.0",
+      "resolved": "https://registry.npmjs.org/@pkgjs/parseargs/-/parseargs-0.11.0.tgz",
+      "integrity": "sha512-+1VkjdD0QBLPodGrJUeqarH8VAIvQODIbwh9XpP5Syisf7YoQgsJKPNFoqqLQlu+VQ/tVSshMR6loPMn8U+dPg==",
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "engines": {
+        "node": ">=14"
+      }
+    },
     "node_modules/@rollup/rollup-android-arm-eabi": {
       "version": "4.57.1",
       "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.57.1.tgz",
@@ -979,7 +1151,6 @@
       "integrity": "sha512-m0jEgYlYz+mDJZ2+F4v8D1AyQb+QzsNqRuI7xg1VQX/KlKS0qT9r1Mo16yo5F/MtifXFgaofIFsdFMox2SxIbQ==",
       "dev": true,
       "license": "MIT",
-      "peer": true,
       "dependencies": {
         "undici-types": "~7.16.0"
       }
@@ -1031,7 +1202,6 @@
       "integrity": "sha512-4Z+L8I2OqhZV8qA132M4wNL30ypZGYOQVBfMgxDH/K5UX0PNqTu1c6za9ST5r9+tavvHiTWmBnKzpCJ/GlVFtg==",
       "dev": true,
       "license": "BSD-2-Clause",
-      "peer": true,
       "dependencies": {
         "@typescript-eslint/scope-manager": "7.18.0",
         "@typescript-eslint/types": "7.18.0",
@@ -1192,6 +1362,39 @@
       "dev": true,
       "license": "ISC"
     },
+    "node_modules/@vitest/coverage-v8": {
+      "version": "2.1.9",
+      "resolved": "https://registry.npmjs.org/@vitest/coverage-v8/-/coverage-v8-2.1.9.tgz",
+      "integrity": "sha512-Z2cOr0ksM00MpEfyVE8KXIYPEcBFxdbLSs56L8PO0QQMxt/6bDj45uQfxoc96v05KW3clk7vvgP0qfDit9DmfQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@ampproject/remapping": "^2.3.0",
+        "@bcoe/v8-coverage": "^0.2.3",
+        "debug": "^4.3.7",
+        "istanbul-lib-coverage": "^3.2.2",
+        "istanbul-lib-report": "^3.0.1",
+        "istanbul-lib-source-maps": "^5.0.6",
+        "istanbul-reports": "^3.1.7",
+        "magic-string": "^0.30.12",
+        "magicast": "^0.3.5",
+        "std-env": "^3.8.0",
+        "test-exclude": "^7.0.1",
+        "tinyrainbow": "^1.2.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      },
+      "peerDependencies": {
+        "@vitest/browser": "2.1.9",
+        "vitest": "2.1.9"
+      },
+      "peerDependenciesMeta": {
+        "@vitest/browser": {
+          "optional": true
+        }
+      }
+    },
     "node_modules/@vitest/expect": {
       "version": "2.1.9",
       "resolved": "https://registry.npmjs.org/@vitest/expect/-/expect-2.1.9.tgz",
@@ -1311,7 +1514,6 @@
       "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
       "dev": true,
       "license": "MIT",
-      "peer": true,
       "bin": {
         "acorn": "bin/acorn"
       },
@@ -1710,6 +1912,20 @@
         "node": ">=6.0.0"
       }
     },
+    "node_modules/eastasianwidth": {
+      "version": "0.2.0",
+      "resolved": "https://registry.npmjs.org/eastasianwidth/-/eastasianwidth-0.2.0.tgz",
+      "integrity": "sha512-I88TYZWc9XiYHRQ4/3c5rjjfgkjhLyW2luGIheGERbNQ6OY7yTybanSpDXZa8y7VUP9YmDcYa+eyq4ca7iLqWA==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/emoji-regex": {
+      "version": "9.2.2",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-9.2.2.tgz",
+      "integrity": "sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==",
+      "dev": true,
+      "license": "MIT"
+    },
     "node_modules/end-of-stream": {
       "version": "1.4.5",
       "resolved": "https://registry.npmjs.org/end-of-stream/-/end-of-stream-1.4.5.tgz",
@@ -1785,7 +2001,6 @@
       "deprecated": "This version is no longer supported. Please see https://eslint.org/version-support for other options.",
       "dev": true,
       "license": "MIT",
-      "peer": true,
       "dependencies": {
         "@eslint-community/eslint-utils": "^4.2.0",
         "@eslint-community/regexpp": "^4.6.1",
@@ -2115,6 +2330,23 @@
       "dev": true,
       "license": "ISC"
     },
+    "node_modules/foreground-child": {
+      "version": "3.3.1",
+      "resolved": "https://registry.npmjs.org/foreground-child/-/foreground-child-3.3.1.tgz",
+      "integrity": "sha512-gIXjKqtFuWEgzFRJA9WCQeSJLZDjgJUOMCMzxtvFq/37KojM1BFGufqsCy0r4qSQmYLsZYMeyRqzIWOMup03sw==",
+      "dev": true,
+      "license": "ISC",
+      "dependencies": {
+        "cross-spawn": "^7.0.6",
+        "signal-exit": "^4.0.1"
+      },
+      "engines": {
+        "node": ">=14"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/isaacs"
+      }
+    },
     "node_modules/fs-constants": {
       "version": "1.0.0",
       "resolved": "https://registry.npmjs.org/fs-constants/-/fs-constants-1.0.0.tgz",
@@ -2262,6 +2494,13 @@
         "node": ">=8"
       }
     },
+    "node_modules/html-escaper": {
+      "version": "2.0.2",
+      "resolved": "https://registry.npmjs.org/html-escaper/-/html-escaper-2.0.2.tgz",
+      "integrity": "sha512-H2iMtd0I4Mt5eYiapRdIDjp+XzelXQ0tFE4JS7YFwFevXXMmOp9myNrUvCg0D6ws8iqkRPBfKHgbwig1SmlLfg==",
+      "dev": true,
+      "license": "MIT"
+    },
     "node_modules/ieee754": {
       "version": "1.2.1",
       "resolved": "https://registry.npmjs.org/ieee754/-/ieee754-1.2.1.tgz",
@@ -2353,6 +2592,16 @@
         "node": ">=0.10.0"
       }
     },
+    "node_modules/is-fullwidth-code-point": {
+      "version": "3.0.0",
+      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
+      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/is-glob": {
       "version": "4.0.3",
       "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
@@ -2393,6 +2642,76 @@
       "dev": true,
       "license": "ISC"
     },
+    "node_modules/istanbul-lib-coverage": {
+      "version": "3.2.2",
+      "resolved": "https://registry.npmjs.org/istanbul-lib-coverage/-/istanbul-lib-coverage-3.2.2.tgz",
+      "integrity": "sha512-O8dpsF+r0WV/8MNRKfnmrtCWhuKjxrq2w+jpzBL5UZKTi2LeVWnWOmWRxFlesJONmc+wLAGvKQZEOanko0LFTg==",
+      "dev": true,
+      "license": "BSD-3-Clause",
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/istanbul-lib-report": {
+      "version": "3.0.1",
+      "resolved": "https://registry.npmjs.org/istanbul-lib-report/-/istanbul-lib-report-3.0.1.tgz",
+      "integrity": "sha512-GCfE1mtsHGOELCU8e/Z7YWzpmybrx/+dSTfLrvY8qRmaY6zXTKWn6WQIjaAFw069icm6GVMNkgu0NzI4iPZUNw==",
+      "dev": true,
+      "license": "BSD-3-Clause",
+      "dependencies": {
+        "istanbul-lib-coverage": "^3.0.0",
+        "make-dir": "^4.0.0",
+        "supports-color": "^7.1.0"
+      },
+      "engines": {
+        "node": ">=10"
+      }
+    },
+    "node_modules/istanbul-lib-source-maps": {
+      "version": "5.0.6",
+      "resolved": "https://registry.npmjs.org/istanbul-lib-source-maps/-/istanbul-lib-source-maps-5.0.6.tgz",
+      "integrity": "sha512-yg2d+Em4KizZC5niWhQaIomgf5WlL4vOOjZ5xGCmF8SnPE/mDWWXgvRExdcpCgh9lLRRa1/fSYp2ymmbJ1pI+A==",
+      "dev": true,
+      "license": "BSD-3-Clause",
+      "dependencies": {
+        "@jridgewell/trace-mapping": "^0.3.23",
+        "debug": "^4.1.1",
+        "istanbul-lib-coverage": "^3.0.0"
+      },
+      "engines": {
+        "node": ">=10"
+      }
+    },
+    "node_modules/istanbul-reports": {
+      "version": "3.2.0",
+      "resolved": "https://registry.npmjs.org/istanbul-reports/-/istanbul-reports-3.2.0.tgz",
+      "integrity": "sha512-HGYWWS/ehqTV3xN10i23tkPkpH46MLCIMFNCaaKNavAXTF1RkqxawEPtnjnGZ6XKSInBKkiOA5BKS+aZiY3AvA==",
+      "dev": true,
+      "license": "BSD-3-Clause",
+      "dependencies": {
+        "html-escaper": "^2.0.0",
+        "istanbul-lib-report": "^3.0.0"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/jackspeak": {
+      "version": "3.4.3",
+      "resolved": "https://registry.npmjs.org/jackspeak/-/jackspeak-3.4.3.tgz",
+      "integrity": "sha512-OGlZQpz2yfahA/Rd1Y8Cd9SIEsqvXkLVoSw/cgwhnhFMDbsQFeZYoJJ7bIZBS9BcamUW96asq/npPWugM+RQBw==",
+      "dev": true,
+      "license": "BlueOak-1.0.0",
+      "dependencies": {
+        "@isaacs/cliui": "^8.0.2"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/isaacs"
+      },
+      "optionalDependencies": {
+        "@pkgjs/parseargs": "^0.11.0"
+      }
+    },
     "node_modules/js-yaml": {
       "version": "4.1.1",
       "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.1.tgz",
@@ -2481,6 +2800,13 @@
       "dev": true,
       "license": "MIT"
     },
+    "node_modules/lru-cache": {
+      "version": "10.4.3",
+      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-10.4.3.tgz",
+      "integrity": "sha512-JNAzZcXrCt42VGLuYz0zfAzDfAvJWW6AfYlDBQyDV5DClI2m5sAmK+OIO7s59XfsRsWHp02jAJrRadPRGTt6SQ==",
+      "dev": true,
+      "license": "ISC"
+    },
     "node_modules/magic-string": {
       "version": "0.30.21",
       "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.30.21.tgz",
@@ -2491,6 +2817,34 @@
         "@jridgewell/sourcemap-codec": "^1.5.5"
       }
     },
+    "node_modules/magicast": {
+      "version": "0.3.5",
+      "resolved": "https://registry.npmjs.org/magicast/-/magicast-0.3.5.tgz",
+      "integrity": "sha512-L0WhttDl+2BOsybvEOLK7fW3UA0OQ0IQ2d6Zl2x/a6vVRs3bAY0ECOSHHeL5jD+SbOpOCUEi0y1DgHEn9Qn1AQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/parser": "^7.25.4",
+        "@babel/types": "^7.25.4",
+        "source-map-js": "^1.2.0"
+      }
+    },
+    "node_modules/make-dir": {
+      "version": "4.0.0",
+      "resolved": "https://registry.npmjs.org/make-dir/-/make-dir-4.0.0.tgz",
+      "integrity": "sha512-hXdUTZYIVOt1Ex//jAQi+wTZZpUpwBj/0QsOzqegb3rGMMeJiSEu5xLHnYfBrRV4RH2+OCSOO95Is/7x1WJ4bw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "semver": "^7.5.3"
+      },
+      "engines": {
+        "node": ">=10"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/sindresorhus"
+      }
+    },
     "node_modules/merge2": {
       "version": "1.4.1",
       "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
@@ -2552,6 +2906,16 @@
         "url": "https://github.com/sponsors/ljharb"
       }
     },
+    "node_modules/minipass": {
+      "version": "7.1.2",
+      "resolved": "https://registry.npmjs.org/minipass/-/minipass-7.1.2.tgz",
+      "integrity": "sha512-qOOzS1cBTWYF4BH8fVePDBOO9iptMnGUEZwNc/cMWnTV2nVLZ7VoNWEPHkYczZA0pdoA7dl6e7FL659nX9S2aw==",
+      "dev": true,
+      "license": "ISC",
+      "engines": {
+        "node": ">=16 || 14 >=14.17"
+      }
+    },
     "node_modules/mkdirp-classic": {
       "version": "0.5.3",
       "resolved": "https://registry.npmjs.org/mkdirp-classic/-/mkdirp-classic-0.5.3.tgz",
@@ -2668,6 +3032,13 @@
         "url": "https://github.com/sponsors/sindresorhus"
       }
     },
+    "node_modules/package-json-from-dist": {
+      "version": "1.0.1",
+      "resolved": "https://registry.npmjs.org/package-json-from-dist/-/package-json-from-dist-1.0.1.tgz",
+      "integrity": "sha512-UEZIS3/by4OC8vL3P2dTXRETpebLI2NiI5vIrjaD/5UtrkFX/tNbwjTSRAGC/+7CAo2pIcBaRgWmcBBHcsaCIw==",
+      "dev": true,
+      "license": "BlueOak-1.0.0"
+    },
     "node_modules/parent-module": {
       "version": "1.0.1",
       "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
@@ -2711,6 +3082,23 @@
         "node": ">=8"
       }
     },
+    "node_modules/path-scurry": {
+      "version": "1.11.1",
+      "resolved": "https://registry.npmjs.org/path-scurry/-/path-scurry-1.11.1.tgz",
+      "integrity": "sha512-Xa4Nw17FS9ApQFJ9umLiJS4orGjm7ZzwUrwamcGQuHSzDyth9boKDaycYdDcZDuqYATXw4HFXgaqWTctW/v1HA==",
+      "dev": true,
+      "license": "BlueOak-1.0.0",
+      "dependencies": {
+        "lru-cache": "^10.2.0",
+        "minipass": "^5.0.0 || ^6.0.2 || ^7.0.0"
+      },
+      "engines": {
+        "node": ">=16 || 14 >=14.18"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/isaacs"
+      }
+    },
     "node_modules/path-type": {
       "version": "4.0.0",
       "resolved": "https://registry.npmjs.org/path-type/-/path-type-4.0.0.tgz",
@@ -3071,6 +3459,19 @@
       "dev": true,
       "license": "ISC"
     },
+    "node_modules/signal-exit": {
+      "version": "4.1.0",
+      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-4.1.0.tgz",
+      "integrity": "sha512-bzyZ1e88w9O1iNJbKnOlvYTrWPDl46O1bG0D3XInv+9tkPrxrN8jUUTiFlDkkmKWgn1M6CfIA13SuGqOa9Korw==",
+      "dev": true,
+      "license": "ISC",
+      "engines": {
+        "node": ">=14"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/isaacs"
+      }
+    },
     "node_modules/simple-concat": {
       "version": "1.0.1",
       "resolved": "https://registry.npmjs.org/simple-concat/-/simple-concat-1.0.1.tgz",
@@ -3159,6 +3560,76 @@
         "safe-buffer": "~5.2.0"
       }
     },
+    "node_modules/string-width": {
+      "version": "5.1.2",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-5.1.2.tgz",
+      "integrity": "sha512-HnLOCR3vjcY8beoNLtcjZ5/nxn2afmME6lhrDrebokqMap+XbeW8n9TXpPDOqdGK5qcI3oT0GKTW6wC7EMiVqA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "eastasianwidth": "^0.2.0",
+        "emoji-regex": "^9.2.2",
+        "strip-ansi": "^7.0.1"
+      },
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/sindresorhus"
+      }
+    },
+    "node_modules/string-width-cjs": {
+      "name": "string-width",
+      "version": "4.2.3",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "emoji-regex": "^8.0.0",
+        "is-fullwidth-code-point": "^3.0.0",
+        "strip-ansi": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/string-width-cjs/node_modules/emoji-regex": {
+      "version": "8.0.0",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/string-width/node_modules/ansi-regex": {
+      "version": "6.2.2",
+      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-6.2.2.tgz",
+      "integrity": "sha512-Bq3SmSpyFHaWjPk8If9yc6svM8c56dB5BAtW4Qbw5jHTwwXXcTLoRMkpDJp6VL0XzlWaCHTXrkFURMYmD0sLqg==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/ansi-regex?sponsor=1"
+      }
+    },
+    "node_modules/string-width/node_modules/strip-ansi": {
+      "version": "7.1.2",
+      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-7.1.2.tgz",
+      "integrity": "sha512-gmBGslpoQJtgnMAvOVqGZpEz9dyoKTCzy2nfz/n8aIFhN/jCE/rCmcxabB6jOOHV+0WNnylOxaxBQPSvcWklhA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "ansi-regex": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/strip-ansi?sponsor=1"
+      }
+    },
     "node_modules/strip-ansi": {
       "version": "6.0.1",
       "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
@@ -3172,6 +3643,20 @@
         "node": ">=8"
       }
     },
+    "node_modules/strip-ansi-cjs": {
+      "name": "strip-ansi",
+      "version": "6.0.1",
+      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
+      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "ansi-regex": "^5.0.1"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/strip-json-comments": {
       "version": "3.1.1",
       "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
@@ -3226,6 +3711,43 @@
         "node": ">=6"
       }
     },
+    "node_modules/test-exclude": {
+      "version": "7.0.1",
+      "resolved": "https://registry.npmjs.org/test-exclude/-/test-exclude-7.0.1.tgz",
+      "integrity": "sha512-pFYqmTw68LXVjeWJMST4+borgQP2AyMNbg1BpZh9LbyhUeNkeaPF9gzfPGUAnSMV3qPYdWUwDIjjCLiSDOl7vg==",
+      "dev": true,
+      "license": "ISC",
+      "dependencies": {
+        "@istanbuljs/schema": "^0.1.2",
+        "glob": "^10.4.1",
+        "minimatch": "^9.0.4"
+      },
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/test-exclude/node_modules/glob": {
+      "version": "10.5.0",
+      "resolved": "https://registry.npmjs.org/glob/-/glob-10.5.0.tgz",
+      "integrity": "sha512-DfXN8DfhJ7NH3Oe7cFmu3NCu1wKbkReJ8TorzSAFbSKrlNaQSKfIzqYqVY8zlbs2NLBbWpRiU52GX2PbaBVNkg==",
+      "deprecated": "Old versions of glob are not supported, and contain widely publicized security vulnerabilities, which have been fixed in the current version. Please update. Support for old versions may be purchased (at exorbitant rates) by contacting i@izs.me",
+      "dev": true,
+      "license": "ISC",
+      "dependencies": {
+        "foreground-child": "^3.1.0",
+        "jackspeak": "^3.1.2",
+        "minimatch": "^9.0.4",
+        "minipass": "^7.1.2",
+        "package-json-from-dist": "^1.0.0",
+        "path-scurry": "^1.11.1"
+      },
+      "bin": {
+        "glob": "dist/esm/bin.mjs"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/isaacs"
+      }
+    },
     "node_modules/text-table": {
       "version": "0.2.0",
       "resolved": "https://registry.npmjs.org/text-table/-/text-table-0.2.0.tgz",
@@ -3347,7 +3869,6 @@
       "integrity": "sha512-jl1vZzPDinLr9eUt3J/t7V6FgNEw9QjvBPdysz9KfQDD41fQrC2Y4vKQdiaUpFT4bXlb1RHhLpp8wtm6M5TgSw==",
       "dev": true,
       "license": "Apache-2.0",
-      "peer": true,
       "bin": {
         "tsc": "bin/tsc",
         "tsserver": "bin/tsserver"
@@ -3571,6 +4092,107 @@
         "node": ">=0.10.0"
       }
     },
+    "node_modules/wrap-ansi": {
+      "version": "8.1.0",
+      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-8.1.0.tgz",
+      "integrity": "sha512-si7QWI6zUMq56bESFvagtmzMdGOtoxfR+Sez11Mobfc7tm+VkUckk9bW2UeffTGVUbOksxmSw0AA2gs8g71NCQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "ansi-styles": "^6.1.0",
+        "string-width": "^5.0.1",
+        "strip-ansi": "^7.0.1"
+      },
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
+      }
+    },
+    "node_modules/wrap-ansi-cjs": {
+      "name": "wrap-ansi",
+      "version": "7.0.0",
+      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
+      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "ansi-styles": "^4.0.0",
+        "string-width": "^4.1.0",
+        "strip-ansi": "^6.0.0"
+      },
+      "engines": {
+        "node": ">=10"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
+      }
+    },
+    "node_modules/wrap-ansi-cjs/node_modules/emoji-regex": {
+      "version": "8.0.0",
+      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
+      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/wrap-ansi-cjs/node_modules/string-width": {
+      "version": "4.2.3",
+      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
+      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "emoji-regex": "^8.0.0",
+        "is-fullwidth-code-point": "^3.0.0",
+        "strip-ansi": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/wrap-ansi/node_modules/ansi-regex": {
+      "version": "6.2.2",
+      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-6.2.2.tgz",
+      "integrity": "sha512-Bq3SmSpyFHaWjPk8If9yc6svM8c56dB5BAtW4Qbw5jHTwwXXcTLoRMkpDJp6VL0XzlWaCHTXrkFURMYmD0sLqg==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/ansi-regex?sponsor=1"
+      }
+    },
+    "node_modules/wrap-ansi/node_modules/ansi-styles": {
+      "version": "6.2.3",
+      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-6.2.3.tgz",
+      "integrity": "sha512-4Dj6M28JB+oAH8kFkTLUo+a2jwOFkuqb3yucU0CANcRRUbxS0cP0nZYCGjcc3BNXwRIsUVmDGgzawme7zvJHvg==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
+      }
+    },
+    "node_modules/wrap-ansi/node_modules/strip-ansi": {
+      "version": "7.1.2",
+      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-7.1.2.tgz",
+      "integrity": "sha512-gmBGslpoQJtgnMAvOVqGZpEz9dyoKTCzy2nfz/n8aIFhN/jCE/rCmcxabB6jOOHV+0WNnylOxaxBQPSvcWklhA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "ansi-regex": "^6.0.1"
+      },
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/chalk/strip-ansi?sponsor=1"
+      }
+    },
     "node_modules/wrappy": {
       "version": "1.0.2",
       "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
diff --git a/src/__tests__/marketplace.test.ts b/src/__tests__/marketplace.test.ts
new file mode 100644
index 0000000..87f4b6c
--- /dev/null
+++ b/src/__tests__/marketplace.test.ts
@@ -0,0 +1,200 @@
+import { describe, it, expect, beforeEach } from 'vitest';
+import { createMarketplace } from '../index.js';
+import { PluginManifest } from '../types.js';
+
+describe('Plugin Marketplace', () => {
+  let marketplace: ReturnType<typeof createMarketplace>;
+
+  beforeEach(() => {
+    marketplace = createMarketplace();
+  });
+
+  describe('Registry Service', () => {
+    it('should register and retrieve a plugin', () => {
+      const manifest: PluginManifest = {
+        name: 'test-plugin',
+        version: '1.0.0',
+        description: 'A test plugin',
+        author: 'tester',
+        dependencies: {},
+        entryPoint: 'console.log("hello world")',
+        permissions: ['read'],
+      };
+
+      marketplace.registry.register(manifest);
+      const retrieved = marketplace.registry.get('test-plugin');
+      expect(retrieved).toEqual(manifest);
+    });
+
+    it('should list multiple versions of a plugin', () => {
+      const manifestV1: PluginManifest = {
+        name: 'test-plugin',
+        version: '1.0.0',
+        description: 'V1',
+        author: 'tester',
+        dependencies: {},
+        entryPoint: 'v1',
+        permissions: [],
+      };
+      const manifestV2: PluginManifest = { ...manifestV1, version: '2.0.0', description: 'V2' };
+
+      marketplace.registry.register(manifestV1);
+      marketplace.registry.register(manifestV2);
+
+      const versions = marketplace.registry.listVersions('test-plugin');
+      expect(versions).toContain('1.0.0');
+      expect(versions).toContain('2.0.0');
+      expect(versions[0]).toBe('2.0.0'); // Ordered DESC
+    });
+  });
+
+  describe('Version Resolver', () => {
+    it('should resolve version constraints', () => {
+      const available = {
+        'plugin-a': ['1.0.0', '1.1.0', '2.0.0'],
+      };
+      const constraints = [{ name: 'plugin-a', range: '^1.0.0' }];
+
+      const resolved = marketplace.resolver.resolve(constraints, available);
+      expect(resolved[0].version).toBe('1.1.0');
+    });
+
+    it('should throw error for unsatisfiable constraints', () => {
+      const available = {
+        'plugin-a': ['1.0.0'],
+      };
+      const constraints = [{ name: 'plugin-a', range: '^2.0.0' }];
+
+      expect(() => marketplace.resolver.resolve(constraints, available)).toThrow();
+    });
+  });
+
+  describe('Sandboxed Runner', () => {
+    it('should execute code and return results', async () => {
+      const code = '2 + 2';
+      const result = await marketplace.runner.execute(code);
+      expect(result.success).toBe(true);
+      expect(result.output).toBe(4);
+      expect(result.duration).toBeGreaterThanOrEqual(0);
+    });
+
+    it('should handle runtime errors', async () => {
+      const code = 'throw new Error("fail")';
+      const result = await marketplace.runner.execute(code);
+      expect(result.success).toBe(false);
+      expect(result.error).toBe('fail');
+    });
+
+    it('should support context variables', async () => {
+      const code = 'x + y';
+      const result = await marketplace.runner.execute(code, { x: 10, y: 20 });
+      expect(result.success).toBe(true);
+      expect(result.output).toBe(30);
+    });
+
+    it('should timeout for long running code', async () => {
+        const code = 'while(true) {}';
+        const result = await marketplace.runner.executeWithTimeout(code, 100);
+        expect(result.success).toBe(false);
+        expect(result.error).toMatch(/Script execution timed out/);
+    });
+  });
+
+  describe('Review System', () => {
+    it('should manage reviews and ratings', () => {
+      const reviewData = {
+        pluginName: 'test-plugin',
+        pluginVersion: '1.0.0',
+        userId: 'user1',
+        rating: 5,
+        comment: 'Great!',
+      };
+
+      const review = marketplace.reviews.addReview(reviewData);
+      expect(review.id).toBeDefined();
+
+      const reviews = marketplace.reviews.getReviews('test-plugin');
+      expect(reviews.length).toBe(1);
+      expect(marketplace.reviews.getAverageRating('test-plugin')).toBe(5);
+
+      marketplace.reviews.addReview({ ...reviewData, rating: 3, userId: 'user2' });
+      expect(marketplace.reviews.getAverageRating('test-plugin')).toBe(4);
+    });
+
+    it('should exclude flagged reviews from average rating', () => {
+      marketplace.reviews.addReview({ pluginName: 'p', pluginVersion: '1', userId: 'u1', rating: 5, comment: 'ok' });
+      const r2 = marketplace.reviews.addReview({ pluginName: 'p', pluginVersion: '1', userId: 'u2', rating: 1, comment: 'spam' });
+
+      expect(marketplace.reviews.getAverageRating('p')).toBe(3);
+      marketplace.reviews.flagReview(r2.id);
+      expect(marketplace.reviews.getAverageRating('p')).toBe(5);
+    });
+  });
+
+  describe('Dependency Graph', () => {
+    it('should detect circular dependencies', () => {
+      const p1: PluginManifest = { name: 'p1', version: '1.0.0', description: '', author: '', dependencies: { 'p2': '*' }, entryPoint: '', permissions: [] };
+      const p2: PluginManifest = { name: 'p2', version: '1.0.0', description: '', author: '', dependencies: { 'p1': '*' }, entryPoint: '', permissions: [] };
+
+      marketplace.registry.register(p1);
+      marketplace.registry.register(p2);
+
+      expect(marketplace.deps.hasCircularDependency('p1', marketplace.registry)).toBe(true);
+      const cycles = marketplace.deps.detectCycles('p1', marketplace.registry);
+      expect(cycles).toEqual([['p1', 'p2', 'p1']]);
+    });
+
+    it('should produce topological ordering', () => {
+      const p1: PluginManifest = { name: 'p1', version: '1.0.0', description: '', author: '', dependencies: { 'p2': '*' }, entryPoint: '', permissions: [] };
+      const p2: PluginManifest = { name: 'p2', version: '1.0.0', description: '', author: '', dependencies: {}, entryPoint: '', permissions: [] };
+
+      marketplace.registry.register(p1);
+      marketplace.registry.register(p2);
+
+      const order = marketplace.deps.topologicalSort('p1', marketplace.registry);
+      expect(order).toEqual(['p2', 'p1']);
+    });
+  });
+
+  describe('Integration: installPlugin', () => {
+    it('should install a plugin with dependencies', async () => {
+      const dep: PluginManifest = {
+        name: 'dep-plugin',
+        version: '1.0.0',
+        description: 'dep',
+        author: 'tester',
+        dependencies: {},
+        entryPoint: '"dep result"',
+        permissions: [],
+      };
+
+      const main: PluginManifest = {
+        name: 'main-plugin',
+        version: '1.0.0',
+        description: 'main',
+        author: 'tester',
+        dependencies: { 'dep-plugin': '^1.0.0' },
+        entryPoint: '"main result"',
+        permissions: [],
+      };
+
+      marketplace.registry.register(dep);
+
+      const result = await marketplace.installPlugin(main);
+      expect(result.resolvedVersions.length).toBe(1);
+      expect(result.resolvedVersions[0].name).toBe('dep-plugin');
+      expect(result.resolvedVersions[0].version).toBe('1.0.0');
+      expect(result.executionResult.success).toBe(true);
+      expect(result.executionResult.output).toBe('main result');
+    });
+
+    it('should reject circular dependencies during install', async () => {
+      const p1: PluginManifest = { name: 'p1', version: '1.0.0', description: '', author: '', dependencies: { 'p2': '*' }, entryPoint: '1', permissions: [] };
+      const p2: PluginManifest = { name: 'p2', version: '1.0.0', description: '', author: '', dependencies: { 'p1': '*' }, entryPoint: '1', permissions: [] };
+
+      marketplace.registry.register(p2); // Register p2 so p1's dependency can be found (initially)
+
+      await expect(marketplace.installPlugin(p1)).rejects.toThrow(/Circular dependency/);
+    });
+  });
+});
diff --git a/src/deps/index.ts b/src/deps/index.ts
new file mode 100644
index 0000000..6abe231
--- /dev/null
+++ b/src/deps/index.ts
@@ -0,0 +1,105 @@
+import semver from 'semver';
+import { DepsService, DependencyNode, RegistryService } from '../types.js';
+
+export class DependencyGraph implements DepsService {
+  buildTree(name: string, registry: RegistryService): DependencyNode {
+    const manifest = registry.get(name);
+    if (!manifest) throw new Error(`Plugin ${name} not found`);
+
+    const children: DependencyNode[] = [];
+    for (const [depName, range] of Object.entries(manifest.dependencies)) {
+      const versions = registry.listVersions(depName);
+      const version = semver.maxSatisfying(versions, range);
+      if (!version) throw new Error(`Unsatisfied dependency: ${depName}@${range} for ${name}`);
+
+      children.push(this.buildTree(depName, registry));
+    }
+
+    return {
+      name: manifest.name,
+      version: manifest.version,
+      dependencies: children,
+    };
+  }
+
+  detectCycles(name: string, registry: RegistryService): string[][] | null {
+    const cycles: string[][] = [];
+    const visited = new Set<string>();
+    const path: string[] = [];
+
+    const visit = (nodeName: string) => {
+      if (path.includes(nodeName)) {
+        const cycle = path.slice(path.indexOf(nodeName));
+        cycle.push(nodeName);
+        cycles.push(cycle);
+        return;
+      }
+
+      if (visited.has(nodeName)) return;
+
+      visited.add(nodeName);
+      path.push(nodeName);
+
+      const manifest = registry.get(nodeName);
+      if (manifest) {
+        for (const depName of Object.keys(manifest.dependencies)) {
+          visit(depName);
+        }
+      }
+
+      path.pop();
+    };
+
+    visit(name);
+    return cycles.length > 0 ? cycles : null;
+  }
+
+  topologicalSort(name: string, registry: RegistryService): string[] {
+    if (this.hasCircularDependency(name, registry)) {
+      throw new Error(`Circular dependency detected in ${name}`);
+    }
+
+    const result: string[] = [];
+    const visited = new Set<string>();
+
+    const visit = (nodeName: string) => {
+      if (visited.has(nodeName)) return;
+
+      const manifest = registry.get(nodeName);
+      if (manifest) {
+        for (const depName of Object.keys(manifest.dependencies)) {
+          visit(depName);
+        }
+      }
+
+      visited.add(nodeName);
+      result.push(nodeName);
+    };
+
+    visit(name);
+    return result;
+  }
+
+  flattenDependencies(name: string, registry: RegistryService): string[] {
+    const deps = new Set<string>();
+
+    const visit = (nodeName: string) => {
+      const manifest = registry.get(nodeName);
+      if (manifest) {
+        for (const depName of Object.keys(manifest.dependencies)) {
+          if (!deps.has(depName)) {
+            deps.add(depName);
+            visit(depName);
+          }
+        }
+      }
+    };
+
+    visit(name);
+    return Array.from(deps);
+  }
+
+  hasCircularDependency(name: string, registry: RegistryService): boolean {
+    return this.detectCycles(name, registry) !== null;
+  }
+}
diff --git a/src/index.ts b/src/index.ts
new file mode 100644
index 0000000..734778e
--- /dev/null
+++ b/src/index.ts
@@ -0,0 +1,79 @@
+import { Registry } from './registry/index.js';
+import { VersionResolver } from './resolver/index.js';
+import { SandboxedRunner } from './runner/index.js';
+import { Reviews } from './reviews/index.js';
+import { DependencyGraph } from './deps/index.js';
+import {
+  PluginManifest,
+  RegistryService,
+  ResolverService,
+  RunnerService,
+  ReviewService,
+  DepsService,
+  ResolvedVersion,
+  SandboxResult
+} from './types.js';
+
+export interface Marketplace {
+  registry: RegistryService;
+  resolver: ResolverService;
+  runner: RunnerService;
+  reviews: ReviewService;
+  deps: DepsService;
+  installPlugin(manifest: PluginManifest): Promise<{
+    resolvedVersions: ResolvedVersion[];
+    executionResult: SandboxResult;
+  }>;
+}
+
+export function createMarketplace(): Marketplace {
+  const registry = new Registry();
+  const resolver = new VersionResolver();
+  const runner = new SandboxedRunner();
+  const reviews = new Reviews();
+  const deps = new DependencyGraph();
+
+  return {
+    registry,
+    resolver,
+    runner,
+    reviews,
+    deps,
+
+    async installPlugin(manifest: PluginManifest) {
+      // 1. Validate manifest
+      if (!manifest.name || !manifest.version || !manifest.entryPoint) {
+        throw new Error('Plugin manifest missing required fields: name, version, entryPoint');
+      }
+
+      // 2. Register plugin
+      registry.register(manifest);
+
+      // 3. Resolve dependencies
+      const constraints = Object.entries(manifest.dependencies).map(([name, range]) => ({
+        name,
+        range,
+      }));
+
+      const available: Record<string, string[]> = {};
+      for (const constraint of constraints) {
+        available[constraint.name] = registry.listVersions(constraint.name);
+      }
+
+      const resolvedVersions = resolver.resolve(constraints, available);
+
+      // 4. Check for circular dependencies
+      if (deps.hasCircularDependency(manifest.name, registry)) {
+        throw new Error(`Circular dependency detected in ${manifest.name}`);
+      }
+
+      // 5. Execute in sandbox
+      const executionResult = await runner.execute(manifest.entryPoint);
+
+      return {
+        resolvedVersions,
+        executionResult,
+      };
+    },
+  };
+}
diff --git a/src/registry/index.ts b/src/registry/index.ts
new file mode 100644
index 0000000..83b151a
--- /dev/null
+++ b/src/registry/index.ts
@@ -0,0 +1,141 @@
+import Database from 'better-sqlite3';
+import { PluginManifest, RegistryService } from '../types.js';
+
+export class Registry implements RegistryService {
+  private db: Database.Database;
+
+  constructor(dbPath: string = ':memory:') {
+    this.db = new Database(dbPath);
+    this.init();
+  }
+
+  private init() {
+    this.db.exec(`
+      CREATE TABLE IF NOT EXISTS plugins (
+        name TEXT,
+        version TEXT,
+        description TEXT,
+        author TEXT,
+        dependencies TEXT,
+        entryPoint TEXT,
+        permissions TEXT,
+        PRIMARY KEY (name, version)
+      )
+    `);
+  }
+
+  register(manifest: PluginManifest): void {
+    const stmt = this.db.prepare(`
+      INSERT OR REPLACE INTO plugins (name, version, description, author, dependencies, entryPoint, permissions)
+      VALUES (?, ?, ?, ?, ?, ?, ?)
+    `);
+    stmt.run(
+      manifest.name,
+      manifest.version,
+      manifest.description,
+      manifest.author,
+      JSON.stringify(manifest.dependencies),
+      manifest.entryPoint,
+      JSON.stringify(manifest.permissions)
+    );
+  }
+
+  get(name: string): PluginManifest | null {
+    const stmt = this.db.prepare('SELECT * FROM plugins WHERE name = ? ORDER BY version DESC LIMIT 1');
+    const row = stmt.get(name) as {
+      name: string;
+      version: string;
+      description: string;
+      author: string;
+      dependencies: string;
+      entryPoint: string;
+      permissions: string;
+    } | undefined;
+    if (!row) return null;
+    return this.mapRow(row);
+  }
+
+  getVersion(name: string, version: string): PluginManifest | null {
+    const stmt = this.db.prepare('SELECT * FROM plugins WHERE name = ? AND version = ?');
+    const row = stmt.get(name, version) as {
+      name: string;
+      version: string;
+      description: string;
+      author: string;
+      dependencies: string;
+      entryPoint: string;
+      permissions: string;
+    } | undefined;
+    if (!row) return null;
+    return this.mapRow(row);
+  }
+
+  list(): PluginManifest[] {
+    const stmt = this.db.prepare('SELECT * FROM plugins');
+    const rows = stmt.all() as {
+      name: string;
+      version: string;
+      description: string;
+      author: string;
+      dependencies: string;
+      entryPoint: string;
+      permissions: string;
+    }[];
+    return rows.map(row => this.mapRow(row));
+  }
+
+  search(query: string): PluginManifest[] {
+    const stmt = this.db.prepare('SELECT * FROM plugins WHERE name LIKE ? OR description LIKE ?');
+    const q = `%${query}%`;
+    const rows = stmt.all(q, q) as {
+      name: string;
+      version: string;
+      description: string;
+      author: string;
+      dependencies: string;
+      entryPoint: string;
+      permissions: string;
+    }[];
+    return rows.map(row => this.mapRow(row));
+  }
+
+  remove(name: string, version: string): boolean {
+    const stmt = this.db.prepare('DELETE FROM plugins WHERE name = ? AND version = ?');
+    const result = stmt.run(name, version);
+    return result.changes > 0;
+  }
+
+  listVersions(name: string): string[] {
+    const stmt = this.db.prepare('SELECT version FROM plugins WHERE name = ? ORDER BY version DESC');
+    const rows = stmt.all(name) as { version: string }[];
+    return rows.map(row => row.version);
+  }
+
+  update(name: string, version: string, updates: Partial<PluginManifest>): void {
+    const existing = this.getVersion(name, version);
+    if (!existing) throw new Error(`Plugin ${name}@${version} not found`);
+
+    const updated = { ...existing, ...updates };
+    this.register(updated);
+  }
+
+  private mapRow(row: {
+    name: string;
+    version: string;
+    description: string;
+    author: string;
+    dependencies: string;
+    entryPoint: string;
+    permissions: string;
+  }): PluginManifest {
+    return {
+      name: row.name,
+      version: row.version,
+      description: row.description,
+      author: row.author,
+      dependencies: JSON.parse(row.dependencies),
+      entryPoint: row.entryPoint,
+      permissions: JSON.parse(row.permissions),
+    };
+  }
+}
diff --git a/src/resolver/index.ts b/src/resolver/index.ts
new file mode 100644
index 0000000..31adad9
--- /dev/null
+++ b/src/resolver/index.ts
@@ -0,0 +1,40 @@
+import semver from 'semver';
+import { ResolverService, VersionConstraint, ResolvedVersion } from '../types.js';
+
+export class VersionResolver implements ResolverService {
+  resolve(constraints: VersionConstraint[], available: Record<string, string[]>): ResolvedVersion[] {
+    const resolved: ResolvedVersion[] = [];
+
+    for (const constraint of constraints) {
+      const versions = available[constraint.name];
+      if (!versions || versions.length === 0) {
+        throw new Error(`No versions available for plugin: ${constraint.name}`);
+      }
+
+      const version = semver.maxSatisfying(versions, constraint.range);
+      if (!version) {
+        throw new Error(`No satisfying version found for ${constraint.name}@${constraint.range}`);
+      }
+
+      resolved.push({
+        name: constraint.name,
+        version: version,
+        satisfies: constraint.range,
+      });
+    }
+
+    return resolved;
+  }
+
+  satisfies(version: string, range: string): boolean {
+    return semver.satisfies(version, range);
+  }
+
+  maxSatisfying(versions: string[], range: string): string | null {
+    return semver.maxSatisfying(versions, range);
+  }
+
+  validRange(range: string): boolean {
+    return semver.validRange(range) !== null;
+  }
+}
diff --git a/src/reviews/index.ts b/src/reviews/index.ts
new file mode 100644
index 0000000..b4901d2
--- /dev/null
+++ b/src/reviews/index.ts
@@ -0,0 +1,139 @@
+import Database from 'better-sqlite3';
+import { Review, ReviewService } from '../types.js';
+
+export class Reviews implements ReviewService {
+  private db: Database.Database;
+
+  constructor(dbPath: string = ':memory:') {
+    this.db = new Database(dbPath);
+    this.init();
+  }
+
+  private init() {
+    this.db.exec(`
+      CREATE TABLE IF NOT EXISTS reviews (
+        id INTEGER PRIMARY KEY AUTOINCREMENT,
+        pluginName TEXT,
+        pluginVersion TEXT,
+        userId TEXT,
+        rating INTEGER,
+        comment TEXT,
+        flagged BOOLEAN DEFAULT 0,
+        createdAt TEXT
+      )
+    `);
+  }
+
+  addReview(reviewData: Omit<Review, 'id' | 'createdAt' | 'flagged'>): Review {
+    const createdAt = new Date().toISOString();
+    const stmt = this.db.prepare(`
+      INSERT INTO reviews (pluginName, pluginVersion, userId, rating, comment, createdAt)
+      VALUES (?, ?, ?, ?, ?, ?)
+    `);
+    const result = stmt.run(
+      reviewData.pluginName,
+      reviewData.pluginVersion,
+      reviewData.userId,
+      reviewData.rating,
+      reviewData.comment,
+      createdAt
+    );
+    const id = Number(result.lastInsertRowid);
+    return {
+      id,
+      ...reviewData,
+      flagged: false,
+      createdAt,
+    };
+  }
+
+  getReviews(pluginName: string): Review[] {
+    const stmt = this.db.prepare('SELECT * FROM reviews WHERE pluginName = ?');
+    const rows = stmt.all(pluginName) as {
+      id: number;
+      pluginName: string;
+      pluginVersion: string;
+      userId: string;
+      rating: number;
+      comment: string;
+      flagged: number;
+      createdAt: string;
+    }[];
+    return rows.map(row => this.mapRow(row));
+  }
+
+  getAverageRating(pluginName: string): number {
+    const stmt = this.db.prepare('SELECT AVG(rating) as avgRating FROM reviews WHERE pluginName = ? AND flagged = 0');
+    const result = stmt.get(pluginName) as { avgRating: number | null };
+    return result.avgRating || 0;
+  }
+
+  flagReview(reviewId: number): void {
+    const stmt = this.db.prepare('UPDATE reviews SET flagged = 1 WHERE id = ?');
+    stmt.run(reviewId);
+  }
+
+  getFlaggedReviews(): Review[] {
+    const stmt = this.db.prepare('SELECT * FROM reviews WHERE flagged = 1');
+    const rows = stmt.all() as {
+      id: number;
+      pluginName: string;
+      pluginVersion: string;
+      userId: string;
+      rating: number;
+      comment: string;
+      flagged: number;
+      createdAt: string;
+    }[];
+    return rows.map(row => this.mapRow(row));
+  }
+
+  removeReview(reviewId: number): boolean {
+    const stmt = this.db.prepare('DELETE FROM reviews WHERE id = ?');
+    const result = stmt.run(reviewId);
+    return result.changes > 0;
+  }
+
+  getReviewsByUser(userId: string): Review[] {
+    const stmt = this.db.prepare('SELECT * FROM reviews WHERE userId = ?');
+    const rows = stmt.all(userId) as {
+      id: number;
+      pluginName: string;
+      pluginVersion: string;
+      userId: string;
+      rating: number;
+      comment: string;
+      flagged: number;
+      createdAt: string;
+    }[];
+    return rows.map(row => this.mapRow(row));
+  }
+
+  getReviewCount(pluginName: string): number {
+    const stmt = this.db.prepare('SELECT COUNT(*) as count FROM reviews WHERE pluginName = ?');
+    const result = stmt.get(pluginName) as { count: number };
+    return result.count;
+  }
+
+  private mapRow(row: {
+    id: number;
+    pluginName: string;
+    pluginVersion: string;
+    userId: string;
+    rating: number;
+    comment: string;
+    flagged: number;
+    createdAt: string;
+  }): Review {
+    return {
+      id: row.id,
+      pluginName: row.pluginName,
+      pluginVersion: row.pluginVersion,
+      userId: row.userId,
+      rating: row.rating,
+      comment: row.comment,
+      flagged: Boolean(row.flagged),
+      createdAt: row.createdAt,
+    };
+  }
+}
diff --git a/src/runner/index.ts b/src/runner/index.ts
new file mode 100644
index 0000000..4296258
--- /dev/null
+++ b/src/runner/index.ts
@@ -0,0 +1,44 @@
+import vm from 'node:vm';
+import { RunnerService, SandboxResult } from '../types.js';
+
+export class SandboxedRunner implements RunnerService {
+  async execute(code: string, context: Record<string, unknown> = {}): Promise<SandboxResult> {
+    return this.executeWithTimeout(code, 5000, context); // Default 5s timeout
+  }
+
+  async executeWithTimeout(code: string, timeoutMs: number, context: Record<string, unknown> = {}): Promise<SandboxResult> {
+    const sandbox = { ...context };
+    vm.createContext(sandbox);
+
+    const start = performance.now();
+    const startMemory = process.memoryUsage().heapUsed;
+
+    try {
+      const script = new vm.Script(code);
+      const output = script.runInContext(sandbox, { timeout: timeoutMs });
+
+      const end = performance.now();
+      const endMemory = process.memoryUsage().heapUsed;
+
+      return {
+        success: true,
+        output: output,
+        duration: end - start,
+        memoryUsed: Math.max(0, endMemory - startMemory),
+      };
+    } catch (err) {
+      const end = performance.now();
+      let message = String(err);
+      if (err && typeof err === 'object' && 'message' in err) {
+        message = String((err as { message: unknown }).message);
+      }
+      return {
+        success: false,
+        output: null,
+        duration: end - start,
+        memoryUsed: 0,
+        error: message,
+      };
+    }
+  }
+}
