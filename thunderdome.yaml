orchestrators:
  - name: "null"
    adapter: ./adapters/null.sh
    image: alpine:latest

  - name: claude-code
    adapter: ./adapters/claude-code/adapter.sh
    image: thunderdome/claude-code:latest
    env:
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"

  - name: claude-code-oauth
    adapter: ./adapters/claude-code-oauth/adapter.sh
    image: thunderdome/claude-code:latest
    env: {}

  - name: claude-code-oauth-opus
    adapter: ./adapters/claude-code-oauth-opus/adapter.sh
    image: thunderdome/claude-code:latest
    env: {}

  - name: conclave
    adapter: ./adapters/conclave/adapter.sh
    image: thunderdome/conclave:latest
    env:
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"
      OPENAI_API_KEY: "${OPENAI_API_KEY}"
      GEMINI_API_KEY: "${GEMINI_API_KEY}"
      CONCLAVE_NON_INTERACTIVE: "1"

  - name: claude-code-haiku
    adapter: ./adapters/claude-code-haiku/adapter.sh
    image: thunderdome/claude-code:latest
    env:
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"

  - name: claude-code-gemini
    adapter: ./adapters/claude-code-gemini/adapter.sh
    image: thunderdome/claude-code-gemini:latest
    env:
      GEMINI_API_KEY: "${GEMINI_API_KEY}"
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"

  - name: conclave-haiku
    adapter: ./adapters/conclave-haiku/adapter.sh
    image: thunderdome/conclave:latest
    env:
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"
      CONCLAVE_NON_INTERACTIVE: "1"

  - name: conclave-gemini
    adapter: ./adapters/conclave-gemini/adapter.sh
    image: thunderdome/conclave-gemini:latest
    env:
      GEMINI_API_KEY: "${GEMINI_API_KEY}"
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"
      OPENAI_API_KEY: "${OPENAI_API_KEY}"
      CONCLAVE_NON_INTERACTIVE: "1"

  - name: aider
    adapter: ./adapters/aider/adapter.sh
    image: thunderdome/aider:latest
    env:
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"

  - name: aider-gemini
    adapter: ./adapters/aider-gemini/adapter.sh
    image: thunderdome/aider:latest
    env:
      GEMINI_API_KEY: "${GEMINI_API_KEY}"

  - name: amplifier
    adapter: ./adapters/amplifier/adapter.sh
    image: thunderdome/amplifier:latest
    env:
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"

  - name: claude-squad
    adapter: ./adapters/claude-squad/adapter.sh
    image: thunderdome/claude-squad:latest
    env:
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"

  - name: swe-agent
    adapter: ./adapters/swe-agent/adapter.sh
    image: thunderdome/swe-agent:latest
    env:
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"

  - name: superpowers
    adapter: ./adapters/superpowers/adapter.sh
    image: thunderdome/superpowers:latest
    env:
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"

  - name: gastown
    adapter: ./adapters/gastown/adapter.sh
    image: thunderdome/gastown:latest
    env:
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"

  - name: superpowers-oauth-opus
    adapter: ./adapters/superpowers-oauth-opus/adapter.sh
    image: thunderdome/superpowers:latest
    env: {}

  - name: gastown-oauth-opus
    adapter: ./adapters/gastown-oauth-opus/adapter.sh
    image: thunderdome/gastown:latest
    env: {}

  - name: gas-station-oauth-opus
    adapter: ./adapters/gas-station-oauth-opus/adapter.sh
    image: thunderdome/gastown:latest
    env: {}

  - name: conclave-oauth-opus
    adapter: ./adapters/conclave-oauth-opus/adapter.sh
    image: thunderdome/conclave:latest
    env:
      CONCLAVE_NON_INTERACTIVE: "1"

  - name: amplifier-oauth-opus
    adapter: ./adapters/amplifier-oauth-opus/adapter.sh
    image: thunderdome/amplifier:latest
    env:
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"

rubric: &default_rubric
  - criterion: "Concise"
    weight: 1
  - criterion: "Correct"
    weight: 1
  - criterion: "Elegant"
    weight: 1
  - criterion: "Idiomatic"
    weight: 1

tasks:
  # T1: CLI Time Tracker — greenfield/simple
  - id: T1
    name: "CLI Time Tracker"
    repo: ./benchmarks/bench-time-tracker
    tag: v1
    reference_tag: v1-solution
    validation_tag: v1-validation
    category: greenfield/simple
    greenfield: true
    test_cmd: "npm test"
    build_cmd: "npm run build"
    lint_cmd: "npm run lint"
    time_limit_minutes: 15
    rubric: *default_rubric
    green_weights:
      rubric: 0.35
      hidden_tests: 0.25
      agent_tests: 0.20
      build_lint: 0.10
      code_metrics: 0.10

  # T2: Real-Time Collab Server — greenfield/complex
  - id: T2
    name: "Collab Server"
    repo: ./benchmarks/bench-collab-server
    tag: v1
    reference_tag: v1-solution
    validation_tag: v1-validation
    category: greenfield/complex
    greenfield: true
    test_cmd: "npm test"
    build_cmd: "npm run build"
    lint_cmd: "npm run lint"
    time_limit_minutes: 45
    rubric: *default_rubric
    green_weights:
      rubric: 0.35
      hidden_tests: 0.25
      agent_tests: 0.20
      build_lint: 0.10
      code_metrics: 0.10

  # T3: FTS Search — features/medium (35 tests: 15 existing + 20 new)
  - id: T3
    name: "FTS Search"
    repo: ./benchmarks/bench-fts-search
    tag: v1
    reference_tag: v1-solution
    category: features/medium
    test_cmd: "npm test"
    build_cmd: "npm run build"
    lint_cmd: "npm run lint"
    time_limit_minutes: 30
    rubric: *default_rubric

  # T4: Phantom Invoice Bug — bugfix/medium (41 tests: 30 visible + 10 regression + 1 diff-size)
  - id: T4
    name: "Phantom Invoice Bug"
    repo: ./benchmarks/bench-phantom-invoice
    tag: v1
    reference_tag: v1-solution
    category: bugfix/medium
    test_cmd: "npm test"
    build_cmd: "npm run build"
    lint_cmd: "npm run lint"
    time_limit_minutes: 20
    rubric: *default_rubric

  # T5: Task Queue Marathon — marathon (12 phases)
  - id: T5
    name: "Task Queue Marathon"
    repo: ./benchmarks/bench-task-queue
    tag: v1
    reference_tag: v1-solution
    validation_tag: v1-validation
    category: marathon
    greenfield: true
    test_cmd: "npm test"
    build_cmd: "npm run build"
    lint_cmd: "npm run lint"
    time_limit_minutes: 60
    rubric: *default_rubric
    green_weights:
      rubric: 0.35
      hidden_tests: 0.25
      agent_tests: 0.20
      build_lint: 0.10
      code_metrics: 0.10

  # T6: Monorepo Disaster — recovery (49 tests: 44 unit + 5 structural)
  - id: T6
    name: "Monorepo Disaster"
    repo: ./benchmarks/bench-monorepo-disaster
    tag: v1
    reference_tag: v1-solution
    category: recovery
    test_cmd: "npm test"
    build_cmd: "npm run build"
    lint_cmd: "npm run lint"
    time_limit_minutes: 30
    rubric: *default_rubric

  # T7: Plugin Marketplace — greenfield/complex
  - id: T7
    name: "Plugin Marketplace"
    repo: ./benchmarks/bench-plugin-marketplace
    tag: v1
    reference_tag: v1-solution
    validation_tag: v1-validation
    category: greenfield/complex
    greenfield: true
    test_cmd: "npm test"
    build_cmd: "npm run build"
    lint_cmd: "npm run lint"
    time_limit_minutes: 45
    rubric: *default_rubric
    green_weights:
      rubric: 0.35
      hidden_tests: 0.25
      agent_tests: 0.20
      build_lint: 0.10
      code_metrics: 0.10

  # T8: Analytics Dashboard — greenfield/complex
  - id: T8
    name: "Analytics Dashboard"
    repo: ./benchmarks/bench-analytics-dashboard
    tag: v1
    reference_tag: v1-solution
    validation_tag: v1-validation
    category: greenfield/complex
    greenfield: true
    test_cmd: "npm test"
    build_cmd: "npm run build"
    lint_cmd: "npm run lint"
    time_limit_minutes: 45
    rubric: *default_rubric
    green_weights:
      rubric: 0.35
      hidden_tests: 0.25
      agent_tests: 0.20
      build_lint: 0.10
      code_metrics: 0.10

  # T9: SSG Toolkit — features/complex (75 tests: 15 core + 60 plugin)
  - id: T9
    name: "SSG Toolkit"
    repo: ./benchmarks/bench-ssg-toolkit
    tag: v1
    reference_tag: v1-solution
    category: features/complex
    test_cmd: "npm test"
    build_cmd: "npm run build"
    lint_cmd: "npm run lint"
    time_limit_minutes: 45
    rubric: *default_rubric

  # T10: E-Commerce Backend — greenfield/complex
  - id: T10
    name: "E-Commerce Backend"
    repo: ./benchmarks/bench-ecommerce-backend
    tag: v1
    reference_tag: v1-solution
    validation_tag: v1-validation
    category: greenfield/complex
    greenfield: true
    test_cmd: "npm test"
    build_cmd: "npm run build"
    lint_cmd: "npm run lint"
    time_limit_minutes: 45
    rubric: *default_rubric
    green_weights:
      rubric: 0.35
      hidden_tests: 0.25
      agent_tests: 0.20
      build_lint: 0.10
      code_metrics: 0.10

trials: 1

proxy:
  gateway: none
  log_dir: ./results/proxy-logs
  budget_per_trial_usd: 5.00

secrets:
  env_file: .env.secrets

results:
  dir: ./results
